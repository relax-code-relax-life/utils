/* v2.1.2 https://wangwl.net/static/pages/utils.html */
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){return"undefined"!=typeof window&&window.document},t=function(){return e()?navigator.userAgent:""},n=function(){return e()?navigator.platform:""},r=Function.prototype.call.bind(Object.prototype.toString),o=Array.isArray||function(e){return"[object Array]"===r(e)},i=function(e){return"number"==typeof e},u=function(e){return"[object Function]"===r(e)},a=function(e){return"boolean"==typeof e},c=Object.assign||function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.forEach((function(t){for(var n in t)e[n]=t[n]})),e},s=function(e,t){if(e.fill)return e.fill(t);for(var n=e.length-1;n>-1;n--)e[n]=t;return e},f=function(){var e={};return e.promise=new Promise((function(t,n){e.resolve=function(n){return t(n),e.promise},e.reject=function(t){return n(t),e.promise}})),e},p=f,l=function(e,t){if(!u(e))throw TypeError("promisify(): argument not a function");return Object.defineProperties((function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=e.__p$symbol__;if(o){if(!u(o))throw TypeError(e.name+"[promisify.custom] is not a function");return Promise.resolve(o.apply(t||this,n))}var i=p(),a=e.length-1-n.length;a>0&&(n=n.concat(s(new Array(a),void 0)));try{n.push((function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];e?i.reject(e):t.length>1?i.resolve(t):i.resolve(t[0])})),e.apply(t||this,n)}catch(e){i.reject(e)}return i.promise}),Object.getOwnPropertyDescriptors(e))};l.custom="__p$symbol__";var d=function(e,t,n){var r=e;if(o(r))return r.forEach(t,n);Object.keys(r).forEach((function(e){t.call(n,r[e],e,r)}))},v=function(e){return void 0===e&&(e=""),e+Date.now()},h=v,m={},y=function(e,t){void 0===e&&(e=0);var n=f(),r=setTimeout((function(){n.resolve(t?t():void 0)}),e),o=n.promise;return o.abort=function(){clearTimeout(r)},o},g=function(e,t,n){return function(n){for(var r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];return!t&&(t=this),e.apply(t,r)}};var x=g((function(){if(e()){for(var t,n,r={},o=/(?:;\s|^)([^;]*?)=([^;]*)/g,i=/([^&]+)=([^&]+)(?:&|$)/g,u=document.cookie;t=o.exec(u);)for(r[t[1]]={value:unescape(t[2]),values:null};n=i.exec(t[2]);)r[t[1]].values=r[t[1]].values||{},r[t[1]].values[n[1]]=unescape(n[2]);return r}})),_=function(t,n,o){if(e()){var u,a,c,s,f="";if(t){if(t+="",null==n&&(n=""),"object"==typeof n){for(a in n)f+=a+"="+escape(n[a])+"&";f=f.slice(0,-1)}else f+=escape(n);return(o=o||{}).expires&&"[object Date]"!==r(o.expires)&&(s=o.expires,(c=new Date).setTime(c.valueOf()+(i(s.day)?86400*s.day*1e3:0)+(i(s.hour)?3600*s.hour*1e3:0)+(i(s.min)?60*s.min*1e3:0)+(i(s.sec)?1e3*s.sec:0)),o.expires=c),u=t+"="+f+(o.expires?";expires="+o.expires.toUTCString():"")+(o.path?"; path="+o.path:"")+(o.domain?"; domain="+o.domain:"")+(o.secure?"; secure":""),document.cookie=u,x(!0)[t]}}},w=function(t,n){return!!e()&&(_(t,"",c(n,{expires:{day:-30}})),!(t in x(!0)))},M={delete:w,del:w,set:_,get:function(e,t){var n=x(t)[e];return n&&n.value}},b=/[\u0020-\u007f\uff61-\uff9f]/g,D=/\n/g,E=/-([a-zA-Z])/g,A=/[A-Z]/g,j=/"|&|'|<|>|[\x00-\x20]|[\x7F-\xFF]/g,k=/&#(\d+);|(<br\s*\/\s*>)/g,C=/&.+?;/g,T=function(e,t,n){var r,o;return void 0===e&&(e=""),(t=~~t)<=(o=((e+="")+"").length)?e:(n=n&&n.charAt(0)||" ",(r=s(new Array(t-o),n)).push(e),r.join(""))},S=/\$\{\s*(.+?)\s*\}/g,F=function(){var e=!0;try{new Function("``")}catch(t){e=!1}return e?function(e,t){return new Function("__scope__","\n                    var __result__;\n                    try{\n                        with(__scope__){\n                            __result__=`"+e+'`\n                        }\n                    }\n                    catch(e){\n                        __result__="";\n                    }\n                    return __result__;\n                    ')(t)}:function(e,t){var n=!0,r=e.split(S).map((function(e){return(n=!n)?e:"'"+e.replace("'","\\'")+"'"})).join("+");return new Function("__scope__","\n            var __result__;\n            with(__scope__){ \n                __result__="+r+";\n            }\n            return __result__;\n         ")(t)}}(),I={year:"FullYear",month:"Month",day:"Date",hour:"Hours",min:"Minutes",sec:"Seconds"},O=/y+|M+|d+|H+|h+|m+|s+|S+|a|(\[.*?])/g,P=function(e,t){var n=I;"number"==typeof t&&(t={day:t}),e=new Date(e);var r="";return d(n,(function(o,i){t[i]&&e["set"+(r=n[i])](e["get"+r]()+~~t[i])})),e},W=function(e){return(e=new Date(e)).setDate(1),e},H=function(e){return(e=new Date(e)).setMonth(e.getMonth()+1),e.setDate(0),e},$=/Android/i,U=/MicroMessenger/,L=/iphone|ipad|ipod|ios/i,R=function(e){return U.test(e||t())},Y=/(?:Chrome|CriOS)\/(\d+)/,z=/(?:Firefox|FxiOS)\/(\d+)/,N=/Version\/([\d.]+)( Mobile\/.+?)? Safari\/\d+/,Z=/(?:MSIE |Trident\/.*; rv:)(\d+)/,q=/(?:Edge|Edg|EdgiOS|EdgA)\/(\d+)/;function B(e,n){var r=e.exec(n||t());return r&&r[1]}var J=/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/i;function K(e){var t={},n=!1;return o(e)?e.forEach((function(e){return t[e]=!0})):n=e,{map:t,isAll:n}}function Q(e,t){try{return decodeURIComponent(e)}catch(e){throw e.message="URI malformed (malformed key: "+t+")",e}}var V=/(?:^|&)(.*?)=(.*?)(?=&|$)/g,X=/(\?([^#]*))?(#.*)?\s*$/,G=/(?:[?&])(.*?)(?:=(.*?))?(?=&|$|#)/g,ee=function(e,t){if(void 0===t&&(t=!1),null==e||"object"!=typeof e)return e?e+"":"";var n,r=[],o=encodeURIComponent,i=K(t),u=i.map,a=i.isAll;for(var c in e)null==(n=e[c])?n="":"object"==typeof n&&(n=JSON.stringify(n)),n=a||u[c]?n:o(n),r.push(o(c)+"="+n);return r.join("&")},te=ee,ne=function(t,n){void 0===n&&(n=!1);var r,o,i,u={},a=K(n),c=Q;for(G.lastIndex=0;r=G.exec(t||e()&&location.search||"");)o=r[1],i=r[2],o&&(i||(i=""),u[c(o,o)]=a.isAll||a.map[o]?i:c(i,o));return u},re=function(e){var t=function(){var e="inner_copy_fake_ele",t=document.getElementById(e);return t||((t=document.createElement("textarea")).style.position="absolute",t.style.left="-999px",t.style.top="0px",t.setAttribute("readonly",""),t.id=e,document.body.appendChild(t),t)}();return t.value=e,t.select(),document.execCommand("copy")};exports.cache=g,exports.camelCase=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.join("-").replace(E,(function(e,t){return t.toUpperCase()}))},exports.clearLoop=function(e){var t=m[e];t&&(clearTimeout(t),m[e]=void 0)},exports.cookie=M,exports.copyTxt=function(t){if(!e())throw new Error("Method `copyTxt` can only be invoked in browser environment.");try{if(!re(t))return!1}catch(e){return!1}return!0},exports.countStr=function(e,t,n,r){if(void 0===t&&(t=1),void 0===n&&(n=.5),void 0===r&&(r=1),!e)return 0;t=+t,n=+n,r=+r;var o=(e+="").match(b),i=e.match(D),u=o?o.length:0,a=i?i.length:0;return t*(e.length-u-a)+n*u+r*a},exports.dateAdd=P,exports.dateFormat=function(e,t){if(void 0===t&&(t="yyyy-MM-dd hh:mm:ss"),"[object Date]"!==r(e))return"";var n,o,i=e.getHours(),u=i>12?"pm":"am",a={y:e.getFullYear(),M:e.getMonth()+1,d:e.getDate(),H:i,h:i>12?i-12:i,m:e.getMinutes(),s:e.getSeconds(),S:e.getMilliseconds(),a:u};return t.replace(O,(function(e){return"["===(o=e.charAt(0))?e.slice(1,-1):"a"===o?a[o]:(n=T(a[o],e.length,"0"),"y"===o&&(n=n.slice(-e.length,n.length)),n)}))},exports.dateParse=function(e,t){t||(t="yyyy-MM-dd hh:mm:ss");var n,r,o={y:void 0,M:void 0,d:1,H:void 0,h:void 0,m:0,s:0,S:0,a:"am"},i=t.replace(O,(function(e){var t,n=e[0],r=e.length;if("y"===n)t=r<4?"\\d{"+r+"}":"\\d{4}";else if("M"===n||"d"===n||"H"===n||"h"===n||"m"===n||"s"===n)t=1===r?"[1-9]\\d|\\d":"\\d{2}";else if("S"===n)t=r<3?"\\d{"+r+"}":"\\d{3}";else if("a"===n)t="(am|Am|AM|pm|Pm|PM)?";else if("["===n)return e.slice(1,-1);return"("+t+")"})),u=new RegExp(i,"g").exec(e),a=1;if(!u)throw new Error('The date format "'+t+'" match the date string "'+e+'" failed.');for(;n=O.exec(t);)"["!==(r=n[0].charAt(0))&&(o[r]="a"===r?u[a++]:~~u[a++]);var c,s=(new Date).getFullYear();return void 0===o.y?o.y=s:(c=o.y+"").length<4&&(c=(s+"").slice(0,4-c.length)+c,o.y=~~c),void 0===o.M?o.M=0:o.M-=1,o.h||(o.a="am",o.h=o.H||0),o.a=o.a.toLowerCase(),"pm"===o.a&&(o.h+=12),new Date(o.y,o.M,o.d,o.h,o.m,o.s,o.S)},exports.debounce=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=t[0],o=t[1],i=t[2],c=t[3];u(r)||(c=i,i=o,o=r,r=void 0),a(o)||(c=i,i=o,o=!1),null==i&&(i=300);var s,f,p,l=c,d=function(e){clearTimeout(s),s=setTimeout(e,i)};return p=o?function(){s||e.apply(c,f),d((function(){s=void 0}))}:function(){d((function(){e.apply(c,f),s=void 0}))},function(){f=arguments,!l&&(c=this),p(),r&&r.apply(c,f)}},exports.defer=f,exports.deleteCookie=w,exports.download=function(t,n){if(!e())throw new Error("Method `download` can only be invoked in browser environment.");var r=document.createElement("a");r.download=n,r.href=t,r.target="_blank";var o=document.createEvent("MouseEvents");o.initEvent("click",!1,!1),r.dispatchEvent(o)},exports.each=d,exports.find=function(e,t,n){var r=e;if(o(r))return r.find(t,n);var i=Object.keys(r).find((function(e){return t.call(n,r[e],e,r)}));return i&&r[i]},exports.firstDateInMonth=W,exports.firstWeekInMonth=function(e){var t=W(e),n=t.getDay();return 0===n&&(n=7),P(t,1-n)},exports.getCookie=x,exports.getQuery=ne,exports.htmlDecode=function(t){return e()?function(e){if(null==e||""===e)return"";var t=e.match(C);if(t){var n=document.createElement("div");n.innerHTML=t.join(","),t=n.innerText.split(","),n=null}else t=[];var r=0;return e.replace(C,(function(e,n){return t[r++]}))}(t):(n=t,(n+="").replace(k,(function(e,t,n){return n?"\n":("160"===t&&(t=32),String.fromCharCode(t))})));var n},exports.htmlEncode=function(e){var t;return"string"!=typeof e&&(e+=""),e.replace(j,(function(e){return 32===(t=e.charCodeAt(0))&&(t=160),10===t?"<br/>":"&#"+t+";"}))},exports.isAndroid=function(e){return $.test(e||t())},exports.isArrayLike=function(e){return e&&"object"==typeof e&&isFinite(e.length)&&e.length>=0&&e.length===Math.floor(e.length)&&e.length<4294967296&&!e.nodeType},exports.isChrome=function(e){return B(Y,e)},exports.isEdge=function(e){return B(q,e)},exports.isFirefox=function(e){return B(z,e)},exports.isIE=function(e){return B(Z,e)},exports.isIos=function(e){return L.test(e||t())},exports.isMac=function(){var e=n();return"MacIntel"===e||"Macintosh"===e||"MacPPC"===e||"Mac68K"===e},exports.isSafari=function(e){return B(Y,e)||B(q,e)?null:B(N,e)},exports.isUrl=function(e){return J.test(e)},exports.isWeiXin=R,exports.isWifi=function(){if(e()){var t=navigator,n=t.connection||t.mozConnection||t.webkitConnection;return n?"cellular"!==n.type:R()?/NetType\/WIFI/.test(navigator.userAgent):void 0}},exports.isWindows=function(){var e=n();return"Win32"===e||"Windows"===e||"Win16"===e||"Win64"===e||"WinCE"===e},exports.kebabCase=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.map((function(e){return e.replace(A,(function(e,t){return(0===t?"":"-")+e.toLowerCase()}))})).join("-")},exports.lastDateInMonth=H,exports.lastWeekInMonth=function(e){var t=H(e),n=t.getDay();return 0!==n&&(t=P(t,7-n)),t},exports.loop=function(e,t,n){void 0===n&&(n=!1);var r=h("loop");m[r]="_init";var o=function(){m[r]&&(m[r]=setTimeout(i,t))},i=function(){Promise.resolve(e()).then(o)};return n?i():o(),r},exports.map=function(e,t,n){var r=e;if(o(r))return r.map(t,n);var i=[];return d(r,(function(e,o){i.push(t.call(n,e,o,r))})),i},exports.noop=function(){},exports.paddingLeft=T,exports.param=ee,exports.parseParam=function(e,t){void 0===t&&(t=!1);var n,r,o={},i=Q,u=K(t),a=u.map,c=u.isAll;for(V.lastIndex=0;n=V.exec(e);)o[r=n[1]]=c||a[r]?n[2]:i(n[2],r);return o},exports.pick=function(e,t){if(!e)return{};var n=[];if(u(t))n=Object.keys(e).filter(t);else{if(!Array.isArray(t))return{};n=t}return n.reduce((function(t,n){return n in e&&(t[n]=e[n]),t}),{})},exports.promisify=l,exports.resolveUrl=function(e,t,n){t=c(ne(e),t);var r=te(t,n);return e.replace(X,"?"+r+"$3")},exports.retry=function(e,t,n,r){if(void 0===n&&(n=0),void 0===r&&(r=this),"number"!=typeof t)throw new TypeError("the parameter max is not a number");var o=0,i=function(){return o++,Promise.resolve(e.apply(r,arguments)).then((function(e){return o=0,e}),(function(e){var r=this;return o<t?n>0?y(n,(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return i.apply(r,e)})):i.apply(this,arguments):(o=0,Promise.reject(e))}))};return i},exports.setCookie=_,exports.template=F,exports.throttle=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=t[0],o=t[1],i=t[2],c=t[3];u(r)||(c=i,i=o,o=r,r=void 0),a(o)||(c=i,i=o,o=!1),null==i&&(i=300);var s,f,p,l=c;return p=o?function(){e.apply(c,f),s=setTimeout((function(){s=void 0}),i)}:function(){s=setTimeout((function(){e.apply(c,f),s=void 0}),i)},function(){f=arguments,!l&&(c=this),r&&r.apply(c,f),s||p()}},exports.tick=v,exports.timeout=y,exports.unique=function(e,t,n,r){if(void 0===t&&(t=!1),"function"==typeof t&&(r=n,n=t,t=!1),"function"==typeof Set&&!n)return Array.from(new Set(e));var o=[],i=n?e.map(n,r):e;if(t){var u;i.forEach((function(t,n){u!==t&&(u=t,o.push(e[n]))}))}else{var a=[];i.forEach((function(t,n){a.includes(t)||(a.push(t),o.push(e[n]))}))}return o},exports.weekRange=function(e,t,n){var r,o=[];if(!e||!t)return o;e>t&&(r=t,t=e,e=r),"number"!=typeof n&&(n=1);for(var i,u=1,a=new Date(e);a<t;)1===u&&a.getDay()===n?(+a!=+e&&o.push({end:new Date(a.getTime()-864e5)}),o.push({start:new Date(a)}),u=7):7===u&&(o[i=o.length-1].end=new Date(a.getTime()-864e5),o[i].duration=7,o.push({start:new Date(a)})),a.setDate(a.getDate()+u);for(var c=[0,1,2,3,4,5,6],s=0;s<n;s++)c[s]+=7;var f=o.length;return 0===f?o=[{start:e,end:t,duration:c[t.getDay()]-c[e.getDay()]+1}]:(o[0].start||(o[0].start=e,o[0].duration=c[o[0].end.getDay()]-c[e.getDay()]+1),o[i=f-1].end=t,o[i].duration=c[o[i].end.getDay()]-c[o[i].start.getDay()]+1),o},exports.weekendsCount=function(e,t){e=new Date(e.getFullYear(),e.getMonth(),e.getDate());var n,r,o,i,u=((t=new Date(t.getFullYear(),t.getMonth(),t.getDate()))-e)/864e5+1;return n=2*Math.floor(u/7),(r=u%7)&&(i=(o=e.getDay())+r-1,0===o?n++:o<=6&&i>=6&&(n+=Math.min(i-Math.max(o,6)+1,2))),n};
